



`注册用户接口把前面的user去掉`

![image-20220318094216315](https://gitee.com/kekekeke111/typora/raw/master/typoraImage/202203180942396.png)

==修改用户信息==

接口：`user/update`

http://localhost:8082/user/update?username=柯&password=1&mobilephone=15819475746&sex=男&email=347858300@qq.com&userId=3

| 参数        | 是否必须 | 说明     |
| ----------- | -------- | -------- |
| username    | 是       | 用户名   |
| password    | 是       | 密码     |
| mobilephone | 是       | 电话号码 |
| sex         | 是       | 性别     |
| email       | 是       | 邮箱     |
| userId      | 是       | 用户id   |

返回案例

{

  "status": 200,

  "message": "修改成功",

  "data": {

​    "userid": 3,

​    "username": "柯",

​    "password": "1",

​    "mobilephone": "15819475746",

​    "email": "347858300@qq.com",

​    "uimage": **null**,

​    "sex": "男",

​    "createtime": **null**,

​    "status": **null**,

​    "degree": **null**

  }

}

==更换用户头像==

接口：`/user/avatar/update`

| 参数   | 是否必须 | 说明         |
| ------ | -------- | ------------ |
| userId | 是       | 用户id       |
| file   | 是       | 用户头像文件 |

> 返回案例：

{

  "status": 200,

  "message": "上传成功",

  "data": **null**

}



==根据商品类别显示商品   目前数据库中只有两种类别  电子产品和书籍==

接口：`/selectByType`

| 参数             | 是否必须 | 说明                         |
| ---------------- | -------- | ---------------------------- |
| start（Integer） | 是       | 页数（1代表第一页 以此类推） |
| end（Integer）   | 是       | 每页需要多少个商品数据       |
| type(String)     | 是       | 商品类别                     |

示例：http://localhost:8082/selectByType?start=2&end=2&type=电子产品

> 输出：

{

  "status": 200,

  "message": "成功返回啦",

  "data": {

​    "total": 6,

​    "list": [

​      {

​        "commid": 1,

​        "commname": "iphonex",

​        "commdesc": "品牌: Apple/苹果，Apple型号: iPhone X，版本类型：中国大陆，分辨率: 2436x1125像素，网络类型: 4G+全网通 4G全网通 4G+全网通 4G全网通，CPU核心数: 六核，运行内存RAM: 3GB，存储容量: 64GB，后置摄像头: 双1200万，摄像头类型: 三摄像头（后双）,6.1英寸",

​        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​        "orimoney": 99999.00,

​        "thinkmoney": 8888.00,

​        "createtime": "2022-03-05T14:13:53.000+0000",

​        "commstatus": 1,

​        "rednumber": 11,

​        "category": "电子产品",

​        "image": "/img/1647008915494微信图片_20220311222130.jpg",

​        "userid": 2,

​        "alreadsold": "未售"

​      },

​      {

​        "commid": 3,

​        "commname": "oppo11",

​        "commdesc": "牛逼",

​        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​        "orimoney": 1111.00,

​        "thinkmoney": 11.00,

​        "createtime": "2022-03-13T07:59:19.000+0000",

​        "commstatus": 0,

​        "rednumber": 1,

​        "category": "电子产品",

​        "image": "/img/1647008915494微信图片_20220311222130.jpg",

​        "userid": 1,

​        "alreadsold": "未售"

​      }

​    ],

​    "pageNum": 1,

​    "pageSize": 2,

​    "size": 2,

​    "startRow": 1,

​    "endRow": 2,

​    "pages": 3,

​    "prePage": 0,

​    "nextPage": 2,

​    "isFirstPage": **true**,

​    "isLastPage": **false**,

​    "hasPreviousPage": **false**,

​    "hasNextPage": **true**,

​    "navigatePages": 8,

​    "navigatepageNums": [

​      1,

​      2,

​      3

​    ],

​    "navigateFirstPage": 1,

​    "navigateLastPage": 3

  }

}



==根据商品类别和价格升降序显示商品==

接口：`/http://localhost:8082/selectByTypeAndPrice`

| 参数             | 是否必须 | 说明                         |
| ---------------- | -------- | ---------------------------- |
| start（Integer） | 是       | 页数（1代表第一页 以此类推） |
| end（Integer）   | 是       | 每页需要多少个商品数据       |
| type(String)     | 是       | 商品类别                     |
| order（String）  | 是       | 传入0代表升序 1代表降序      |

案例：http://localhost:8082/selectByTypeAndPrice?start=1&end=4&type=电子产品&order=0

{

  "status": 200,

  "message": "成功返回啦",

  "data": {

​    "total": 6,

​    "list": [

​      {

​        "commid": 7,

​        "commname": "魅族",

​        "commdesc": "1",

​        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​        "orimoney": 2.00,

​        "thinkmoney": 3.00,

​        "createtime": "2022-03-13T08:05:08.000+0000",

​        "commstatus": 0,

​        "rednumber": 0,

​        "category": "电子产品",

​        "image": "/img/1647008915494微信图片_20220311222130.jpg",

​        "userid": 1,

​        "alreadsold": "未售"

​      },

​      {

​        "commid": 3,

​        "commname": "oppo11",

​        "commdesc": "牛逼",

​        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​        "orimoney": 1111.00,

​        "thinkmoney": 11.00,

​        "createtime": "2022-03-13T07:59:19.000+0000",

​        "commstatus": 0,

​        "rednumber": 1,

​        "category": "电子产品",

​        "image": "/img/1647008915494微信图片_20220311222130.jpg",

​        "userid": 1,

​        "alreadsold": "未售"

​      },

​      {

​        "commid": 4,

​        "commname": "华为",

​        "commdesc": "11",

​        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​        "orimoney": 11.00,

​        "thinkmoney": 11.00,

​        "createtime": "2022-03-13T08:03:18.000+0000",

​        "commstatus": 0,

​        "rednumber": 24,

​        "category": "电子产品",

​        "image": "/img/1647008915494微信图片_20220311222130.jpg",

​        "userid": 1,

​        "alreadsold": "未售"

​      },

​      {

​        "commid": 5,

​        "commname": "大哥大",

​        "commdesc": "1",

​        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​        "orimoney": 22.00,

​        "thinkmoney": 22.00,

​        "createtime": "2022-03-13T08:03:49.000+0000",

​        "commstatus": 0,

​        "rednumber": 0,

​        "category": "电子产品",

​        "image": "/img/1647008915494微信图片_20220311222130.jpg",

​        "userid": 2,

​        "alreadsold": "未售"

​      }

​    ],

​    "pageNum": 1,

​    "pageSize": 4,

​    "size": 4,

​    "startRow": 1,

​    "endRow": 4,

​    "pages": 2,

​    "prePage": 0,

​    "nextPage": 2,

​    "isFirstPage": **true**,

​    "isLastPage": **false**,

​    "hasPreviousPage": **false**,

​    "hasNextPage": **true**,

​    "navigatePages": 8,

​    "navigatepageNums": [

​      1,

​      2

​    ],

​    "navigateFirstPage": 1,

​    "navigateLastPage": 2

  }

}



根据商品id返回商品信息

```
接口：/selectProBycommid
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

例子：http://localhost:8082/selectProBycommid?commid=1

> 输出：

{

  "status": 200,

  "message": "查询成功",

  "data": {

​    "commid": 3,

​    "commname": "oppo11",

​    "commdesc": "牛逼",

​    "videourl": "/view/1647003901139WeChat_20220311205536.mp4",

​    "orimoney": 1111.00,

​    "thinkmoney": 11.00,

​    "createtime": "2022-03-13T07:59:19.000+0000",

​    "commstatus": 0,

​    "rednumber": 1,

​    "category": "电子产品",

​    "image": "/img/1647008915494微信图片_20220311222130.jpg",

​    "userid": 1,

​    "alreadsold": "未售"

  }

}



==**退出登录接口**==

Get请求：
 /user/logout

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| userid（Integer） | 是       | 用户id |



==查询商品子图==

Get请求： /commimage

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |



==评价商品==

Post请求：/addComment

| 参数                | 是否必须 | 说明         |
| ------------------- | -------- | ------------ |
| commid（Integer）   | 是       | 商品id       |
| cuserid（Integer）  | 是       | 用户id       |
| spuserid（Integer） | 是       | 商品拥有者id |
| content(String)     | 是       | 评论内容     |

==根据商品id查询所有的评价==

/showComment

| 参数              | 是否必须 | 说明         |
| ----------------- | -------- | ------------ |
| commid（Integer） | 是       | 商品id       |
| page(页数)        | 是       | 第几页       |
| count（数量）     | 是       | 每页多少数据 |



==删除评论接口==

post：

/deleteComment

| 参数 | 是否必须 | 说明   |
| ---- | -------- | ------ |
| cid  | 是       | 评论id |





> 收藏商品接口：

```
访问地址： /collectPro  post请求
```

参数：

| 参数                | 是否必须 | 说明             |
| ------------------- | -------- | ---------------- |
| commid（Integer）   | 是       | 商品id           |
| commname（String）  | 是       | 商品名           |
| commdesc（String）  | 是       | 商品描述         |
| cmuserid（Integer） | 是       | 商品拥有者id     |
| username（String）  | 是       | 商品拥有者用户名 |
|                     |          |                  |

> 返回案例

```shell
{

  "status": 200,
  "message": "收藏成功",
  "data": null

}
```

> 取消收藏接口

```java
访问接口： /giveColPro
```

| 参数               | 是否必须 | 说明   |
| ------------------ | -------- | ------ |
| commid（Integer）  | 是       | 商品id |
| couserid（String） | 是       | 用户id |

返回案例：

```shell
{
    "status": 200,
    "message": "取消收藏成功",
    "data": null
}
```



> 根据id显示所有收藏  

```
访问接口：/selectAllCollect    无需穿参
```

返回案例：

```java
[
    {
        "id": 15,
        "commid": 1,           商品id
        "commname": "2",       商品名字
        "commdesc": "1",       商品描述
        "collstatus": 1,       
        "cmuserid": 1,         
        "username": "zhang",   卖家名
        "couserid": 1,         
        "soldtime": null
    },
    {
        "id": 16,
        "commid": 1,
        "commname": "2",
        "commdesc": "1",
        "collstatus": 1,
        "cmuserid": 1,
        "username": "zhang",
        "couserid": 1,
        "soldtime": null
    },
    {
        "id": 17,
        "commid": 1,
        "commname": "2",
        "commdesc": "1",
        "collstatus": 1,
        "cmuserid": 1,
        "username": "zhang",
        "couserid": 1,
        "soldtime": null
    }
]
```



> 商品模块

`发布商品接口 `

```java
/publishCommodity
```

| 参数       | 是否必须 | 说明        |
| ---------- | -------- | ----------- |
| commname   | 是       | 商品名字    |
| commdesc   | 是       | 商品描述    |
| orimoney   | 是       | 原价        |
| thinkmoney | 是       | 现价        |
| category   | 是       | 商品类别    |
| store      | 是       | 库存        |
| file       | 是       | 主图        |
| files[]    | 是       | 副图，1-3张 |
| video      | 是       | 商品视频    |

实例:

```shell
http://localhost:8082/publishCommodity?commname=测1试&commdesc=1111&orimoney=11&thinkmoney=22&category=测试&store=10
```

返回结果：

```shell
{
    "status": 200,
    "message": "商品发布成功",
    "data": null
}
```

`根据用户id查询用户发布商品清单`

1.查询还未审核的商品

接口：/selectMyProDsh

| 参数              | 是否必须 | 说明                     |
| ----------------- | -------- | ------------------------ |
| commstatus（int） | 是       | 商品状态 值传0给我就好了 |

案例：http://localhost:8082/selectMyProDsh?commstatus=0

输出：

```shell
{
    "status": 200,
    "message": "查询成功",
    "data": [
        {
            "commid": 7,
            "commname": "魅族",
            "commdesc": "1",
            "videourl": "/view/1647958481891v.f30.mp4",
            "orimoney": 2.00,
            "thinkmoney": 3.00,
            "createtime": "2022-03-13 16:05:08",
            "commstatus": 0,
            "rednumber": 1,
            "category": "电子产品",
            "image": "/img/1647950633554O1CN01ocHrjA2D8Mbrs5Fu7_!!2488378564.jpg_400x400.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 1
        }
    ]
}
```

1.查询自己所有发布的商品

接口：/selectMyProByid  没有参数

案例：http://localhost:8082/selectMyProByid

输出：

```shell
{
    "status": 200,
    "message": "查询成功",
    "data": [
        {
            "commid": 3,
            "commname": "oppo11",
            "commdesc": "牛逼",
            "videourl": "/view/1647003901139WeChat_20220311205536.mp4",
            "orimoney": 1111.00,
            "thinkmoney": 11.00,
            "createtime": "2022-03-13 15:59:19",
            "commstatus": 1,
            "rednumber": 18,
            "category": "电子产品",
            "image": "/img/164795994808211b7647460505107.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 1
        },
        {
            "commid": 4,
            "commname": "华为",
            "commdesc": "11",
            "videourl": "/view/1647003901139WeChat_20220311205536.mp4",
            "orimoney": 11.00,
            "thinkmoney": 11.00,
            "createtime": "2022-03-13 16:03:18",
            "commstatus": 1,
            "rednumber": 25,
            "category": "电子产品",
            "image": "/img/1647959667530e68d9d5ce34842b7 (1).jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 1
        },
        {
            "commid": 7,
            "commname": "魅族",
            "commdesc": "1",
            "videourl": "/view/1647958481891v.f30.mp4",
            "orimoney": 2.00,
            "thinkmoney": 3.00,
            "createtime": "2022-03-13 16:05:08",
            "commstatus": 0,
            "rednumber": 1,
            "category": "电子产品",
            "image": "/img/1647950633554O1CN01ocHrjA2D8Mbrs5Fu7_!!2488378564.jpg_400x400.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 1
        },
        {
            "commid": 17,
            "commname": "测试",
            "commdesc": "1111",
            "videourl": "/view/1649944514891WeChat_20220414210114.mp4",
            "orimoney": 11.00,
            "thinkmoney": 22.00,
            "createtime": "2022-04-14 21:55:15",
            "commstatus": 1,
            "rednumber": 0,
            "category": "测试",
            "image": "/img/1649944514883证件照.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 1
        },
        {
            "commid": 18,
            "commname": "测试",
            "commdesc": "1111",
            "videourl": "/view/1649944612701WeChat_20220414210114.mp4",
            "orimoney": 11.00,
            "thinkmoney": 22.00,
            "createtime": "2022-04-14 21:56:52",
            "commstatus": 1,
            "rednumber": 0,
            "category": "测试",
            "image": "/img/1649944612690证件照.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 10
        },
        {
            "commid": 19,
            "commname": "测1试",
            "commdesc": "1111",
            "videourl": "/view/1649944618278WeChat_20220414210114.mp4",
            "orimoney": 11.00,
            "thinkmoney": 22.00,
            "createtime": "2022-04-14 21:56:58",
            "commstatus": 1,
            "rednumber": 0,
            "category": "测试",
            "image": "/img/1649944618271证件照.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 10
        }
    ]
}
```

==**根据商品id返回商品信息**==

```
接口：/selectProBycommid
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

例子：http://localhost:8082/selectProBycommid?commid=1

输出：

```shell
{
    "status": 200,
    "message": "查询成功",
    "data": {
        "commid": 1,
        "commname": "iphonex",
        "commdesc": "品牌: Apple/苹果，Apple型号: iPhone X，版本类型：中国大陆，分辨率: 2436x1125像素，网络类型: 4G+全网通 4G全网通 4G+全网通 4G全网通，CPU核心数: 六核，运行内存RAM: 3GB，存储容量: 64GB，后置摄像头: 双1200万，摄像头类型: 三摄像头（后双）,6.1英寸",
        "videourl": "/view/1647003901139WeChat_20220311205536.mp4",
        "orimoney": 99999.00,
        "thinkmoney": 8888.00,
        "createtime": "2022-03-05 22:13:53",
        "commstatus": 1,
        "rednumber": 27,
        "category": "电子产品",
        "image": "/img/16479602385232908a9906a527932.png",
        "userid": 2,
        "alreadsold": "未售",
        "store": 1
    }
}
```

根据商品id 删除用户发布的商品

```
接口：  /deleteMyProByid
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

实例：http://localhost:8082/deleteMyProByid?commid=19

返回：

```shell
{
    "status": 200,
    "message": "删除成功",
    "data": null
}
```



编辑发布的商品-----修改商品介绍视频

```
接口：/updateMyProViewByid
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

示例：http://localhost:8082/updateMyProViewByid?commid=18

输出：

```shell
{
    "status": 200,
    "message": "上传成功",
    "data": null
}
```



修改主图

```shell
接口： /updatePrimaryTu
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

示例：http://localhost:8082/updatePrimaryTu?commid=18

输出：

```shell
{
    "status": 200,
    "message": "上传成功",
    "data": null
}
```



删除子图  

```xshell
接口： /delete/commimage?id=43
```

| 参数          | 是否必须 | 说明   |
| ------------- | -------- | ------ |
| id（Integer） | 是       | 子图id |

示例：http://localhost:8082/delete/commimage?id=43

```shell
{
    "status": 200,
    "message": "删除成功",
    "data": null
}
```



添加子图

```
接口： /update/commimage
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

请求示例：http://localhost:8082/update/commimage?commid=17

```shell
{
    "status": 200,
    "message": "修改成功",
    "data": null
}
```

修改商品内容：

```shell
/updateExcepFile
```

| 参数                | 是否必须 | 说明     |
| ------------------- | -------- | -------- |
| commid（Integer）   | 是       | 商品id   |
| commname(String)    | 是       | 商品名字 |
| commdesc(String)    | 是       | 商品描述 |
| orimoney(Integer)   | 是       | 原价     |
| thinkmoney(Integer) | 是       | 现价     |
| category(String)    | 是       | 类别     |
| store(Integer)      | 是       | 库存     |

示例：http://localhost:8082/updateExcepFile?commid=17&commname=测1试2&commdesc=1&orimoney=1&thinkmoney=1&category=测试&store=2

```shell
{
    "status": 200,
    "message": "修改成功",
    "data": null
}
```



> 管理员模块   需要新建一个前端

管理员登录：

```java
/admin/Login
```

| 参数     | 是否必须 | 说明   |
| -------- | -------- | ------ |
| username | 是       | 用户名 |
| password | 是       | 密码   |

案例：http://localhost:8082/admin/Login?username=柯&password=1

返回：

```java
{
    "status": 200,
    "message": "登录成功",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxIiwiZXhwIjoxNjUwMTk4MTgwLCJpbmZvIjp7ImRlZ3JlZSI6MSwidXNlcm5hbWUiOiLmn68ifX0.1Jdh-kqk44-ELer3M4Z0oJcaLzp-q7tC1LxoBD4LAbI",
    "data": {
        "userid": 1,
        "username": "柯",
        "password": "1",
        "mobilephone": "15819475746",
        "email": "347858300@qq.com",
        "uimage": "/user/1647675859231defaulttouxiang.png",
        "sex": "男",
        "createtime": "2022-03-04 14:07:36",
        "status": "online",
        "degree": 1
    }
}
```





管理员查看所有待审核的商品   

```java
/admin/selectweishenPro   没有参数
```

示例http://localhost:8082/admin/selectweishenPro

输出：

```java
{
    "status": 200,
    "message": "查询成功",
    "data": [
        {
            "commid": 1,
            "commname": "iphonex",
            "commdesc": "品牌: Apple/苹果，Apple型号: iPhone X，版本类型：中国大陆，分辨率: 2436x1125像素，网络类型: 4G+全网通 4G全网通 4G+全网通 4G全网通，CPU核心数: 六核，运行内存RAM: 3GB，存储容量: 64GB，后置摄像头: 双1200万，摄像头类型: 三摄像头（后双）,6.1英寸",
            "videourl": "/view/1647003901139WeChat_20220311205536.mp4",
            "orimoney": 99999.00,
            "thinkmoney": 8888.00,
            "createtime": "2022-03-05 22:13:53",
            "commstatus": 0,
            "rednumber": 27,
            "category": "电子产品",
            "image": "/img/16479602385232908a9906a527932.png",
            "userid": 2,
            "alreadsold": "未售",
            "store": 1
        },
        {
            "commid": 7,
            "commname": "魅族",
            "commdesc": "1",
            "videourl": "/view/1647958481891v.f30.mp4",
            "orimoney": 2.00,
            "thinkmoney": 3.00,
            "createtime": "2022-03-13 16:05:08",
            "commstatus": 0,
            "rednumber": 1,
            "category": "电子产品",
            "image": "/img/1647950633554O1CN01ocHrjA2D8Mbrs5Fu7_!!2488378564.jpg_400x400.jpg",
            "userid": 1,
            "alreadsold": "未售",
            "store": 1
        }
    ]
}
```





管理员查看所有商品(需要鉴权)

```shell
 接口：admin/selectAllPro   没有参数
```

示例：http://localhost:8082/admin/selectAllPro

输出：

```shell
{
    "status": 200,
    "message": "查询成功",
    "data": [
        {
            "commid": 1,
            "commname": "iphonex",
            "commdesc": "品牌: Apple/苹果，Apple型号: iPhone X，版本类型：中国大陆，分辨率: 2436x1125像素，网络类型: 4G+全网通 4G全网通 4G+全网通 4G全网通，CPU核心数: 六核，运行内存RAM: 3GB，存储容量: 64GB，后置摄像头: 双1200万，摄像头类型: 三摄像头（后双）,6.1英寸",
            "videourl": "/view/1647003901139WeChat_20220311205536.mp4",
            "orimoney": 99999.00,
            "thinkmoney": 8888.00,
            "createtime": "2022-03-05 22:13:53",
            "commstatus": 1,
            "rednumber": 27,
            "category": "电子产品",
            "image": "/img/16479602385232908a9906a527932.png",
            "userid": 2,
            "alreadsold": "未售",
            "store": 1
        },
        {
            "commid": 18,
            "commname": "测试",
            "commdesc": "1111",
            "videourl": "/view/1649984099133WeChat_202204142",
            "orimoney": 11.00,
            "thinkmoney": 22.00,
            "createtime": "2022-04-14 21:56:52",
            "commstatus": 1,
            "rednumber": 0,
            "category": "测试",
            "image": "/img/1649951141167截图",
            "userid": 2,
            "alreadsold": "未售",
            "store": 10
        }
    ]
}
```

管理员通过商品的发布

接口：

```shell
/admin/passPro
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

示例：http://localhost:8082/admin/passPro?commid=1

输出：

```shell
{
    "status": 200,
    "message": "修改成功",
    "data": null
}
```





管理员删除商品

接口：

```java
/admin/deleteMyProByid
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| commid（Integer） | 是       | 商品id |

示例：http://localhost:8082/admin/deleteMyProByid?commid=8

输出：

```shell
{
    "status": 200,
    "message": "删除成功",
    "data": null
}
```



管理员退出登录

```
接口  /admin/logout
```

案例：http://localhost:8082/admin/logout

输出：

```java
{
    "status": 200,
    "message": "退出成功",
    "data": null
}
```



> 订单模块：

下订单跳到支付宝接口 支付后订单状态改为已支付，没有支付依旧抱持没有支付的订单状态

```java
接口： /pay
```

| 参数                | 是否必须 | 说明     |
| ------------------- | -------- | -------- |
| commid（Integer）   | 是       | 商品id   |
| commname(String)    | 是       | 商品名字 |
| commdesc(String)    | 是       | 商品描述 |
| orimoney(Integer)   | 是       | 原价     |
| thinkmoney(Integer) | 是       | 现价     |
| category(String)    | 是       | 类别     |
| store(Integer)      | 是       | 库存     |
| commdesc(String)    | 是       | 商品描述 |

案例：http://localhost:8082/pay?commname=111&soldprice=1&buyerid=1&sellerid=1&commid=1&adress=111&buyerphone=15819475746&buyername=莫敖&count=1&commdesc=111      访问这个会跳到支付宝接口 付款后会返回下面这个数据

```java
{
	"status":200,
	"message":"支付成功",
	"data":null
	}
```



> 用户删除订单  后端同时把一条售出记录也删掉

```java
接口 /deleteOrder
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| orderid（String） | 是       | 订单id |

案例：http://localhost:8082/deleteOrder?orderid=fb234b8f8a0c4798b0b9f814ef7f0cc0

输出：

```java
{
    "status": 200,
    "message": "删除订单成功",
    "data": null
}
```



用户确认收货

```
接口：/confirmGood
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| orderid（String） | 是       | 订单id |

案例：http://localhost:8082/confirmGood?orderid=84e9022dd6f84c4ab56c3a65c786efd1

```shell
{
    "status": 200,
    "message": "已确定收货",
    "data": null
}
```



商家根据订单编号发货     同时修改状态为已发货

接口：

```java
/deliveryGood
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| orderid（String） | 是       | 订单id |

示例：http://localhost:8082/deliveryGood?orderid=84e9022dd6f84c4ab56c3a65c786efd1

输出

```shell
{
    "status": 200,
    "message": "已确定发货",
    "data": null
}
```





商家确认收货

```java
接口： /SjconfirmGood
```

| 参数              | 是否必须 | 说明   |
| ----------------- | -------- | ------ |
| orderid（String） | 是       | 订单id |

示例：http://localhost:8082/SjconfirmGood?orderid=84e9022dd6f84c4ab56c3a65c786efd1

输出

```java
{
    "status": 200,
    "message": "确认收货成功",
    "data": null
}
```



查看所有的售出记录

```java
接口：/allSoldRecord			没有参数
```

示例：http://localhost:8082/allSoldRecord

输出

```java
{
    "status": 200,
    "message": "查询售出记录成功",
    "data": [
        {
            "id": 7,
            "commid": 1,
            "commname": "111",
            "commdesc": "111",
            "thinkmoney": 1.00,
            "soldtime": "2022-04-18 14:57:56",
            "userid": 1,
            "soldstatus": 1,
            "fahuostatus": "待发货",
            "buyerid": 1,
            "orderid": "",
            "isPay": 0
        },
        {
            "id": 8,
            "commid": 1,
            "commname": "111",
            "commdesc": "111",
            "thinkmoney": 1.00,
            "soldtime": "2022-04-18 15:31:47",
            "userid": 1,
            "soldstatus": 1,
            "fahuostatus": "已收货",
            "buyerid": 1,
            "orderid": "84e9022dd6f84c4ab56c3a65c786efd1",
            "isPay": 0
        }
    ]
}
```



> 聊天模块 -------------利用websocket

前端点击感兴趣按钮-------商家和用户自动添加为好友

```java
接口：/addFriendWithBusinesses
```

| 参数               | 是否必须 | 说明     |
| ------------------ | -------- | -------- |
| fuserid（Integer） | 是       | 商家id   |
| sjName（String）   | 是       | 商家名称 |

案例：http://localhost:8082/addFriendWithBusinesses?fuserid=1&sjName=柯

输出：

```java
{
    "status": 200,
    "message": "添加好友成功",
    "data": null
}
```



查看好友列表

```java
接口：/showFriends   不用参数
```

案例：

```java
http://localhost:8082/showFriends
```

输出：

```shell
{
    "status": 200,
    "message": "成功返回好友列表",
    "data": [
        {
            "id": 2,
            "userid": 1,
            "fuserid": 2,
            "addtime": "2022-04-19 22:34:27",
            "username": "柯",
            "friendname": "柯维钦1"
        }
    ]
}
```



查看两人的聊天记录：

```
接口 /chatRecord
```

| 参数         | 是否必须 | 说明   |
| ------------ | -------- | ------ |
| reciveuserid | 是       | 好友id |

案例：http://localhost:8082/chatRecord?reciveuserid=2  说明data1是用户发给好友的聊天记录 data2是好友发给用户的聊天记录

```java
{
    "status": 200,
    "message": "历史聊天记录返回成功",
    "data1": [
        {
            "id": 1,
            "senduserid": 1,
            "reciveuserid": 2,
            "sendtime": "2022-04-20 22:02:40",
            "content": "你好帅\r\n",
            "senderName": "柯维钦",
            "reciverName": "莫敖"
        }
    ],
    "data2": [
        {
            "id": 2,
            "senduserid": 2,
            "reciveuserid": 1,
            "sendtime": "2022-04-20 22:03:12",
            "content": "谢谢 是这么帅的\r\n",
            "senderName": "莫敖",
            "reciverName": "柯维钦"
        }
    ]
}
```



前端new 一个sockect(“/websocket/username”)   其中username是用户名

用户点击好友进行聊天发送的时候：传入一个String类型的参数名叫message（`Json格式化后的字符串`）的内容给我 里面包含的参数有（`我从message中拿的`）：

| 参数        | 是否必须 | 说明             |
| ----------- | -------- | ---------------- |
| message     | 是       | 发送内容         |
| senderid    | 是       | 消息发送者id     |
| reciverid   | 是       | 消息接受者id     |
| senderName  | 是       | 消息发送者用户名 |
| reciverName | 是       | 消息接受者用户名 |



